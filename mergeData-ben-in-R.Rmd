
```{r}
library(tidyverse)
library(dplyr)
```

load in raw data

```{r}
games <- read_csv("data-raw/games.csv")

atbats <- read_csv("data-raw/atbats.csv")

pitches <- read_csv("data-raw/pitches.csv")

merged_data <- read_csv("data-clean/test_clean.csv")
```

understanding a single game

```{r}
atbats_one_game <- 
	atbats %>% 
	filter(g_id == games$g_id[1]) %>% 
	mutate(g_id = as.character(g_id), ab_id = as.character(ab_id)) %>% 
	select(g_id, ab_id, everything())

merged_data_one_game <- 
	merged_data %>% 
	filter(g_id == games$g_id[1]) %>% 
	mutate(g_id = as.character(g_id), ab_id = as.character(ab_id)) %>% 
	select(g_id, ab_id, everything())

pitches_one_game <- 
	pitches %>% 
	filter(ab_id %in% atbats_one_game$ab_id) %>% 
	mutate(ab_id = as.character(ab_id)) %>% 
	select(ab_id, pitch_num, everything())

pitches_one_game %>% View()
```

```{r}
pitches_one_game %>% 
  count(pitch_type)
```


creating the dataframe

```{r}
df_test <- select(merged_data_one_game, s_count, b_count, pitch_num, ab_id)
df_test
```

data visualization 

```{r}
ggplot(data = merged_data_one_game) +
  geom_point(mapping = aes(x = s_count, y = pitch_type))

ggplot(data = merged_data_one_game) +
  geom_bar(mapping = aes(x = pitch_type, y = stat(prop), group =1 ))


```

